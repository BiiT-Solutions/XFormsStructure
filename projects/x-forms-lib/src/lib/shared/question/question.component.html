<biit-form-image
  *ngIf="question && question.image"
  [data]="question.image.data"
  [imageUrl]="question.image.imageUrl"
  [width]="question.image.width"
  [height]="question.image.height"
  [label]="question.label"
/>

<div *ngIf="question.answerType === AnswerType.INPUT" [ngSwitch]="question.answerFormat" [id]="question.id">
  <biit-input-text *ngSwitchCase="VariableType.TEXT"
                   [placeholder]="question.label | varFormat: dataStoreService: dataStoreService.fingerPrint"
                   [required]="question.mandatory"
                   [regEx]="question.answerSubformat | getRegex"
                   [info]="question.description"
                   [disabled]="question.editionDisabled"
                   [(ngModel)]="question.response"
                   (ngModelChange)="onChanged($event)"
  ></biit-input-text>
  <biit-input-text *ngSwitchCase="VariableType.POSTAL_CODE"
                   [placeholder]="question.label | varFormat: dataStoreService: dataStoreService.fingerPrint"
                   [required]="question.mandatory"
                   [regEx]="question.answerSubformat | getRegex"
                   [info]="question.description"
                   [disabled]="question.editionDisabled"
                   [(ngModel)]="question.response"
                   (ngModelChange)="onChanged($event)"
  ></biit-input-text>
  <biit-input-text *ngSwitchCase="VariableType.NUMBER"
                   [placeholder]="question.label | varFormat: dataStoreService: dataStoreService.fingerPrint"
                   [required]="question.mandatory"
                   [type]="Type.NUMBER"
                   [disabled]="question.editionDisabled"
                   [regEx]="question.answerSubformat | getRegex"
                   [info]="question.description"
                   [(ngModel)]="question.response"
                   (ngModelChange)="onChanged($event)"
  ></biit-input-text>
  <biit-datepicker *ngSwitchCase="VariableType.DATE"
                   [required]="question.mandatory"
                   [placeholder]="question.label | varFormat: dataStoreService: dataStoreService.fingerPrint"
                   [disabled]="question.editionDisabled"
                   [min]="question.answerSubformat | getDate : 'min'"
                   [max]="question.answerSubformat | getDate : 'max'"
                   [(ngModel)]="question.response"
                   (ngModelChange)="onChanged($event)"
                   [error]="(question.response | checkDate : question.answerSubformat)"
  ></biit-datepicker>
</div>
<div *ngIf="question.answerType === AnswerType.SINGLE_SELECTION_SLIDER">
  <label *ngIf="question.label && question.label.length">{{question.label}}</label>
  <div *ngIf="question.descriptionAlwaysVisible
              && question.description
              && question.description.length"
        class="question-description"
  >{{question.description}}</div>
  <biit-slider-option *ngIf="question.horizontal"
                      [(ngModel)]="question.response"
                      (ngModelChange)="onSliderOptionSelected($event); onChanged($event)"
                      [inverted]="question.inverseAnswerOrder"
                      [data]="question.children  | sliderConverter"
  />
  <biit-slider-option-vertical style="display: flex; width: 65ch; min-height: 25em"
                               *ngIf="!question.horizontal"
                               [(ngModel)]="question.response"
                               (ngModelChange)="onSliderOptionSelected($event); onChanged($event)"
                               [inverted]="question.inverseAnswerOrder"
                               [data]="question.children  | sliderConverter"
                               [showDescription]="question.answerDescriptionAlwaysVisible"
  />

</div>

<biit-textarea *ngIf="question.answerType === AnswerType.TEXT_AREA"
               [placeholder]="question.label | varFormat: dataStoreService: dataStoreService.fingerPrint"
               [required]="question.mandatory"
               [info]="question.description"
               [(ngModel)]="question.response"
               [disabled]="question.editionDisabled"
               (ngModelChange)="onChanged($event)"
></biit-textarea>
<div *ngIf="question.answerType === AnswerType.SINGLE_SELECTION_RADIO">
  <div style="display: flex">
    <label [required]="question.mandatory" [value]="question.response">
      {{ question.label | varFormat: dataStoreService: dataStoreService.fingerPrint}}</label>
    <div *ngIf="question.descriptionAlwaysVisible
              && question.description
              && question.description.length"
         class="question-description"
    >{{question.description}}</div>
    <biit-tooltip-icon *ngIf="!question.descriptionAlwaysVisible && question.description && question.description.length" inline
                       [text]="question.description"></biit-tooltip-icon>
  </div>
  <biit-multi-radio
    [required]="question.mandatory"
    [label]="question.label | varFormat: dataStoreService: dataStoreService.fingerPrint"
    [disabled]="question.editionDisabled"
    [answers]="question.children"
    [info]="question.description"
    (selected)="question.response = $event; onChanged($event);"
  ></biit-multi-radio>
</div>

<biit-multi-checkbox *ngIf="question.answerType === AnswerType.MULTIPLE_SELECTION"
                     [label]="question.label | varFormat: dataStoreService: dataStoreService.fingerPrint"
                     [answers]="question.children"
                     [required]="question.mandatory"
                     [disabled]="question.editionDisabled"
                     [alert]="exceeded"
                     [info]="question.description"
                     (selected)="question.response = $event; onChanged($event);"
></biit-multi-checkbox>

<biit-dropdown *ngIf="question.answerType === AnswerType.SINGLE_SELECTION_LIST"
               [data]="question.children | varFormatAnswers: dataStoreService: dataStoreService.fingerPrint"
               label="label"
               [title]="question.label | varFormat: dataStoreService: dataStoreService.fingerPrint"
               value="name"
               [required]="question.mandatory"
               [(ngModel)]="question.response"
               [disabled]="question.editionDisabled"
               (ngModelChange)="onChanged($event)"
></biit-dropdown>
