<biit-form-multimedia
  *ngIf="question && question.image"
  [data]="question.image.data"
  [url]="question.image.imageUrl"
  [width]="question.image.width"
  [height]="question.image.height"
  [label]="question.label"
  [mId]="question.comparationId"
/>

<div *ngIf="question.answerType === AnswerType.INPUT" [ngSwitch]="question.answerFormat" [id]="question.id">
  <biit-input-text *ngSwitchCase="VariableType.TEXT"
                   [placeholder]="question.label | varFormat: dataStoreService: dataStoreService.fingerPrint"
                   [required]="question.mandatory"
                   [regEx]="question.answerSubformat | getRegex"
                   [info]="!question.descriptionAlwaysVisible ? question.description : undefined"
                   [description]="question.descriptionAlwaysVisible ? question.description : undefined"
                   [disabled]="question.editionDisabled"
                   [(ngModel)]="question.response"
                   (ngModelChange)="onChanged($event)"
  ></biit-input-text>
  <biit-input-text *ngSwitchCase="VariableType.POSTAL_CODE"
                   [placeholder]="question.label | varFormat: dataStoreService: dataStoreService.fingerPrint"
                   [required]="question.mandatory"
                   [regEx]="question.answerSubformat | getRegex"
                   [info]="!question.descriptionAlwaysVisible ? question.description : undefined"
                   [description]="question.descriptionAlwaysVisible ? question.description : undefined"
                   [disabled]="question.editionDisabled"
                   [(ngModel)]="question.response"
                   (ngModelChange)="onChanged($event)"
  ></biit-input-text>
  <biit-input-text *ngSwitchCase="VariableType.NUMBER"
                   [placeholder]="question.label | varFormat: dataStoreService: dataStoreService.fingerPrint"
                   [required]="question.mandatory"
                   [type]="Type.NUMBER"
                   [disabled]="question.editionDisabled"
                   [regEx]="question.answerSubformat | getRegex"
                   [info]="!question.descriptionAlwaysVisible ? question.description : undefined"
                   [description]="question.descriptionAlwaysVisible ? question.description : undefined"
                   [(ngModel)]="question.response"
                   (ngModelChange)="onChanged($event)"
  ></biit-input-text>
  <biit-datepicker *ngSwitchCase="VariableType.DATE"
                   [required]="question.mandatory"
                   [placeholder]="question.label | varFormat: dataStoreService: dataStoreService.fingerPrint"
                   [disabled]="question.editionDisabled"
                   [min]="question.answerSubformat | getDate : 'min'"
                   [max]="question.answerSubformat | getDate : 'max'"
                   [description]="question.descriptionAlwaysVisible ? question.description : undefined"
                   [(ngModel)]="question.response"
                   (ngModelChange)="onChanged($event)"
                   [error]="(question.response | checkDate : question.answerSubformat)"
  ></biit-datepicker>
</div>
<div *ngIf="question.answerType === AnswerType.SINGLE_SELECTION_SLIDER">
  <div style="margin-bottom: 0.5rem">
    <label class="question-label" *ngIf="question.label && question.label.length">{{ question.label }}</label>
    <div *ngIf="question.descriptionAlwaysVisible
              && question.description
              && question.description.length"
         class="question-description"
    >{{ question.description }}
    </div>
  </div>
  <div>
    <biit-slider-option *ngIf="question.horizontal"
                        [(ngModel)]="question.response"
                        (ngModelChange)="onSliderOptionSelected($event); onChanged($event)"
                        [inverted]="question.inverseAnswerOrder"
                        [showTooltip]="question.answersValuesOnTooltip"
                        [data]="question.children  | sliderConverter"
    />
    <biit-slider-option-vertical style="display: flex; width: 65ch; min-height: 25em"
                                 *ngIf="!question.horizontal"
                                 [(ngModel)]="question.response"
                                 (ngModelChange)="onSliderOptionSelected($event); onChanged($event)"
                                 [inverted]="question.inverseAnswerOrder"
                                 [showTooltip]="question.answersValuesOnTooltip"
                                 [data]="question.children  | sliderConverter"
                                 [showDescription]="question.answerDescriptionAlwaysVisible"
    />
  </div>

</div>

<biit-textarea *ngIf="question.answerType === AnswerType.TEXT_AREA"
               [placeholder]="question.label | varFormat: dataStoreService: dataStoreService.fingerPrint"
               [required]="question.mandatory"
               [info]="!question.descriptionAlwaysVisible ? question.description : undefined"
               [description]="question.descriptionAlwaysVisible ? question.description : undefined"
               [(ngModel)]="question.response"
               [disabled]="question.editionDisabled"
               (ngModelChange)="onChanged($event)"
></biit-textarea>
<div *ngIf="question.answerType === AnswerType.SINGLE_SELECTION_RADIO">
  <div style="display: flex; flex-direction: column; margin-bottom: 0.5rem">
    <div style="display: flex">
      <label class="question-label" [required]="question.mandatory" [value]="question.response">
        {{ question.label | varFormat: dataStoreService: dataStoreService.fingerPrint }}</label>
      <biit-tooltip-icon
        *ngIf="!question.descriptionAlwaysVisible && question.description && question.description.length"
        [text]="question.description" inline></biit-tooltip-icon>
    </div>
    <div *ngIf="question.descriptionAlwaysVisible
              && question.description
              && question.description.length"
         class="question-description"
    >{{ question.description }}
    </div>
  </div>
  <biit-multi-radio
    [required]="question.mandatory"
    [label]="question.label | varFormat: dataStoreService: dataStoreService.fingerPrint"
    [disabled]="question.editionDisabled"
    [answers]="question.children"
    [info]="question.description"
    [showAnswersDescription]="question.answerDescriptionAlwaysVisible"
    (selected)="question.response = $event; onChanged($event);"
  ></biit-multi-radio>
</div>

<biit-multi-checkbox *ngIf="question.answerType === AnswerType.MULTIPLE_SELECTION"
                     [label]="question.label | varFormat: dataStoreService: dataStoreService.fingerPrint"
                     [answers]="question.children"
                     [required]="question.mandatory"
                     [disabled]="question.editionDisabled"
                     [alert]="exceeded"
                     [info]="question.description"
                     [showQuestionDescription]="question.descriptionAlwaysVisible"
                     [showAnswersDescription]="question.answerDescriptionAlwaysVisible"
                     (selected)="question.response = $event; onChanged($event);"
></biit-multi-checkbox>

<biit-dropdown *ngIf="question.answerType === AnswerType.SINGLE_SELECTION_LIST"
               [data]="question.children | varFormatAnswers: dataStoreService: dataStoreService.fingerPrint"
               label="label"
               [title]="question.label | varFormat: dataStoreService: dataStoreService.fingerPrint"
               value="name"
               [required]="question.mandatory"
               [description]="'description'"
               [(ngModel)]="question.response"
               [disabled]="question.editionDisabled"
               (ngModelChange)="onChanged($event)"
></biit-dropdown>
